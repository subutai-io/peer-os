<div ng-controller="NodeRegCtrl as nodeRegCtrl">
  <div class="b-workspace__header">

    <h1 class="b-title">Resource Hosts</h1>
  </div>
  <div class="b-workspace__content">

    <div class="b-data-table">
      <table datatable="ng"
             dt-options="nodeRegCtrl.dtOptions"
             dt-column-defs="nodeRegCtrl.dtColumnDefs"
             class="row-border hover">
        <thead>
        <tr>
          <th>Status</th>
          <th>Name</th>
          <th></th>
          <th>IP</th>
          <th>Approved</th>
          <th>Action</th>
        </tr>
        </thead>
        <tbody>
        <tr ng-repeat="clusterNode in nodeRegCtrl.nodes">
          <td class="b-main-table__container-status">
            <div
                ng-init="status = (clusterNode.status != 'APPROVED' ? 'UNKNOWN' : (clusterNode.isConnected ? 'ONLINE':'OFFLINE'))"
                tooltips
                tooltip-template="{{ status }}"
                class="b-status-icon b-status-icon_{{ status }}">
            </div>
          </td>
          <td>{{ clusterNode.hostname }}
            <span ng-if="clusterNode.isManagement"> [ Management ]</span>
          </td>
          <td>
            <a href
               ng-if="clusterNode.isConnected"
               class="b-icon b-icon_edit"
               tooltips
               tooltip-template='Change hostname'
               ng-click="nodeRegCtrl.changeNamePopup( clusterNode )" style="visibility: visible">
            </a>
          </td>
          <td>{{ nodeRegCtrl.findIp(clusterNode.interfaces) }}</td>
          <td>{{ clusterNode.status == 'APPROVED' ? 'Yes' : 'No' }}</td>
          <td>
            <button ng-if="clusterNode.status == 'REQUESTED'" class="b-btn b-btn_green"
                    ng-click="nodeRegCtrl.approve( clusterNode.id )">Approve
            </button>
            <button ng-if="clusterNode.status == 'REQUESTED'" class="b-btn b-btn_red"
                    ng-click="nodeRegCtrl.reject( clusterNode.id )">Reject
            </button>
            <button ng-if="clusterNode.status == 'APPROVED' || clusterNode.status == 'REJECTED'"
                    class="b-btn b-btn_{{ clusterNode.status == 'APPROVED' ? 'dark' : 'grey'}}"
                    ng-click="nodeRegCtrl.remove( clusterNode.id, clusterNode.status )">{{ clusterNode.status == 'APPROVED' ? 'Remove' :
              'Unblock' }}
            </button>
          </td>
        </tr>
        </tbody>
      </table>
    </div>
  </div>
</div>
